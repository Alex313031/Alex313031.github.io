!function(t,s,i){function n(i,e){if(!s[i]){if(!t[i]){var r="function"==typeof require&&require;if(!e&&r)return r(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var h=s[i]={exports:{}};t[i][0].call(h.exports,function(s){var o=t[i][1][s];return n(o||s)},h,h.exports)}return s[i].exports}for(var o="function"==typeof require&&require,e=0;e<i.length;e++)n(i[e])}({1:[function(t,s,i){var n=t("./verlet"),o=t("./constraint");t("./objects"),window.Vec2=t("./vec2"),window.VerletJS=n,window.Particle=n.Particle,window.DistanceConstraint=o.DistanceConstraint,window.PinConstraint=o.PinConstraint,window.AngleConstraint=o.AngleConstraint},{"./verlet":2,"./constraint":3,"./objects":4,"./vec2":5}],3:[function(t,s,i){function n(t,s,i,n){this.a=t,this.b=s,this.distance=void 0!==n?n:t.pos.sub(s.pos).length(),this.stiffness=i}function o(t,s){this.a=t,this.pos=(new Vec2).mutableSet(s)}function e(t,s,i,n){this.a=t,this.b=s,this.c=i,this.angle=this.b.pos.angle2(this.a.pos,this.c.pos),this.stiffness=n}i.DistanceConstraint=n,i.PinConstraint=o,i.AngleConstraint=e,n.prototype.relax=function(t){var s=this.a.pos.sub(this.b.pos),i=s.length2();s.mutableScale((this.distance*this.distance-i)/i*this.stiffness*t),this.a.pos.mutableAdd(s),this.b.pos.mutableSub(s)},o.prototype.relax=function(t){this.a.pos.mutableSet(this.pos)},e.prototype.relax=function(t){var s=this.b.pos.angle2(this.a.pos,this.c.pos)-this.angle;s<=-Math.PI?s+=2*Math.PI:s>=Math.PI&&(s-=2*Math.PI),s*=t*this.stiffness,this.a.pos=this.a.pos.rotate(this.b.pos,s),this.c.pos=this.c.pos.rotate(this.b.pos,-s),this.b.pos=this.b.pos.rotate(this.a.pos,s),this.b.pos=this.b.pos.rotate(this.c.pos,-s)}},{}],5:[function(t,s,i){function n(t,s){this.x=t||0,this.y=s||0}s.exports=n,n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y)},n.prototype.sub=function(t){return new n(this.x-t.x,this.y-t.y)},n.prototype.mul=function(t){return new n(this.x*t.x,this.y*t.y)},n.prototype.div=function(t){return new n(this.x/t.x,this.y/t.y)},n.prototype.scale=function(t){return new n(this.x*t,this.y*t)},n.prototype.mutableSet=function(t){return this.x=t.x,this.y=t.y,this},n.prototype.mutableAdd=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.mutableSub=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.mutableMul=function(t){return this.x*=t.x,this.y*=t.y,this},n.prototype.mutableDiv=function(t){return this.x/=t.x,this.y/=t.y,this},n.prototype.mutableScale=function(t){return this.x*=t,this.y*=t,this},n.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},n.prototype.epsilonEquals=function(t,s){return Math.abs(this.x-t.x)<=s&&Math.abs(this.y-t.y)<=s},n.prototype.length=function(t){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.length2=function(t){return this.x*this.x+this.y*this.y},n.prototype.dist=function(t){return Math.sqrt(this.dist2(t))},n.prototype.dist2=function(t){var s=t.x-this.x,i=t.y-this.y;return s*s+i*i},n.prototype.normal=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);return new n(this.x/t,this.y/t)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.angle=function(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)},n.prototype.angle2=function(t,s){return t.sub(this).angle(s.sub(this))},n.prototype.rotate=function(t,s){var i=this.x-t.x,o=this.y-t.y;return new n(i*Math.cos(s)-o*Math.sin(s)+t.x,i*Math.sin(s)+o*Math.cos(s)+t.y)},n.prototype.toString=function(){return"("+this.x+", "+this.y+")"}},{}],4:[function(t,s,i){var n=t("./verlet"),o=n.Particle,e=t("./constraint").DistanceConstraint;n.prototype.point=function(t){var s=new this.Composite;return s.particles.push(new o(t)),this.composites.push(s),s},n.prototype.lineSegments=function(t,s){var i,n=new this.Composite;for(i in t)n.particles.push(new o(t[i])),i>0&&n.constraints.push(new e(n.particles[i],n.particles[i-1],s));return this.composites.push(n),n},n.prototype.cloth=function(t,s,i,n,r,h){var a,p,c=new this.Composite,u=s/n,l=i/n;for(p=0;p<n;++p)for(a=0;a<n;++a){var y=t.x+a*u-s/2+u/2,f=t.y+p*l-i/2+l/2;c.particles.push(new o(new Vec2(y,f))),a>0&&c.constraints.push(new e(c.particles[p*n+a],c.particles[p*n+a-1],h)),p>0&&c.constraints.push(new e(c.particles[p*n+a],c.particles[(p-1)*n+a],h))}for(a=0;a<n;++a)a%r==0&&c.pin(a);return this.composites.push(c),c},n.prototype.tire=function(t,s,i,n,r){var h,a=2*Math.PI/i,p=new this.Composite;for(h=0;h<i;++h){var c=h*a;p.particles.push(new o(new Vec2(t.x+Math.cos(c)*s,t.y+Math.sin(c)*s)))}var u=new o(t);for(p.particles.push(u),h=0;h<i;++h)p.constraints.push(new e(p.particles[h],p.particles[(h+1)%i],r)),p.constraints.push(new e(p.particles[h],u,n)),p.constraints.push(new e(p.particles[h],p.particles[(h+5)%i],r));return this.composites.push(p),p}},{"./verlet":2,"./constraint":3}],2:[function(t,s,i){var n=t("./vec2");function o(t,s,i){this.gravity=new n(0,.2),this.friction=.99,this.groundFriction=.8,this.composites=[]}function e(){this.particles=[],this.constraints=[],this.drawParticles=null,this.drawConstraints=null}(i=s.exports=o).Particle=function(t){this.pos=(new n).mutableSet(t),this.lastPos=(new n).mutableSet(t)},i.Composite=e,o.prototype.Composite=e,e.prototype.pin=function(t,s){s=s||this.particles[t].pos;var i=new PinConstraint(this.particles[t],s);return this.constraints.push(i),i},o.prototype.frame=function(t){var s,i,n;for(n in this.composites)for(s in this.composites[n].particles){var o=this.composites[n].particles,e=o[s].pos.sub(o[s].lastPos).scale(this.friction);o[s].lastPos.mutableSet(o[s].pos),o[s].pos.mutableAdd(this.gravity),o[s].pos.mutableAdd(e)}var r=1/t;for(n in this.composites){var h=this.composites[n].constraints;for(s=0;s<t;++s)for(i in h)h[i].relax(r)}}},{"./vec2":5}]},{},[1]);
